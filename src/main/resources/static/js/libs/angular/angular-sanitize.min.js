!function(e,t,r){"use strict";function n(e){var r=[];return c(r,t.noop).chars(e),r.join("")}function a(e){var t,r={},n=e.split(",");for(t=0;t<n.length;t++)r[n[t]]=!0;return r}function s(e,r){function n(e,n){var a,s=0;if(n=t.lowercase(n))for(s=c.length-1;s>=0&&c[s]!=n;s--);if(s>=0){for(a=c.length-1;a>=s;a--)r.end&&r.end(c[a]);c.length=s}}var a,s,o,c=[],v=e;for(c.last=function(){return c[c.length-1]};e;){if(s=!0,c.last()&&C[c.last()])e=e.replace(new RegExp("(.*)<\\s*\\/\\s*"+c.last()+"[^>]*>","i"),function(e,t){return t=t.replace(d,"$1").replace(b,"$1"),r.chars&&r.chars(i(t)),""}),n("",c.last());else if(0===e.indexOf("\x3c!--")?(a=e.indexOf("--",4))>=0&&e.lastIndexOf("--\x3e",a)===a&&(r.comment&&r.comment(e.substring(4,a)),e=e.substring(a+3),s=!1):m.test(e)?(o=e.match(m))&&(e=e.replace(o[0],""),s=!1):g.test(e)?(o=e.match(p))&&(e=e.substring(o[0].length),o[0].replace(p,n),s=!1):h.test(e)&&(o=e.match(u))&&(e=e.substring(o[0].length),o[0].replace(u,function(e,a,s,o){if(a=t.lowercase(a),k[a])for(;c.last()&&y[c.last()];)n("",c.last());z[a]&&c.last()==a&&n("",a),(o=w[a]||!!o)||c.push(a);var l={};s.replace(f,function(e,t,r,n,a){var s=r||n||a||"";l[t]=i(s)}),r.start&&r.start(a,l,o)}),s=!1),s){var x=(a=e.indexOf("<"))<0?e:e.substring(0,a);e=a<0?"":e.substring(a),r.chars&&r.chars(i(x))}if(e==v)throw l("badparse","The sanitizer was unable to parse the following block of html: {0}",e);v=e}n()}function i(e){if(!e)return"";var t=S.exec(e),r=t[1],n=t[3],a=t[2];return a&&(A.innerHTML=a.replace(/</g,"&lt;"),a="textContent"in A?A.textContent:A.innerText),r+a+n}function o(e){return e.replace(/&/g,"&amp;").replace(v,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function c(e,r){var n=!1,a=t.bind(e,e.push);return{start:function(e,s,i){e=t.lowercase(e),!n&&C[e]&&(n=e),n||!0!==E[e]||(a("<"),a(e),t.forEach(s,function(n,s){var i=t.lowercase(s),c="img"===e&&"src"===i||"background"===i;!0!==T[i]||!0===O[i]&&!r(n,c)||(a(" "),a(s),a('="'),a(o(n)),a('"'))}),a(i?"/>":">"))},end:function(e){e=t.lowercase(e),n||!0!==E[e]||(a("</"),a(e),a(">")),e==n&&(n=!1)},chars:function(e){n||a(o(e))}}}var l=t.$$minErr("$sanitize"),u=/^<\s*([\w:-]+)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*>/,p=/^<\s*\/\s*([\w:-]+)[^>]*>/,f=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,h=/^</,g=/^<\s*\//,d=/<!--(.*?)-->/g,m=/<!DOCTYPE([^>]*?)>/i,b=/<!\[CDATA\[(.*?)]]>/g,v=/([^\#-~| |!])/g,w=a("area,br,col,hr,img,wbr"),x=a("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),$=a("rp,rt"),z=t.extend({},$,x),k=t.extend({},x,a("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),y=t.extend({},$,a("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),C=a("script,style"),E=t.extend({},w,k,y,z),O=a("background,cite,href,longdesc,src,usemap"),T=t.extend({},O,a("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width")),A=document.createElement("pre"),S=/^(\s*)([\s\S]*?)(\s*)$/;t.module("ngSanitize",[]).provider("$sanitize",function(){this.$get=["$$sanitizeUri",function(e){return function(t){var r=[];return s(t,c(r,function(t,r){return!/^unsafe/.test(e(t,r))})),r.join("")}}]}),t.module("ngSanitize").filter("linky",["$sanitize",function(e){var r=/((ftp|https?):\/\/|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>]/,a=/^mailto:/;return function(s,i){function o(e){e&&f.push(n(e))}if(!s)return s;for(var c,l,u,p=s,f=[];c=p.match(r);)l=c[0],c[2]==c[3]&&(l="mailto:"+l),u=c.index,o(p.substr(0,u)),function(e,r){f.push("<a "),t.isDefined(i)&&(f.push('target="'),f.push(i),f.push('" ')),f.push('href="'),f.push(e),f.push('">'),o(r),f.push("</a>")}(l,c[0].replace(a,"")),p=p.substring(u+c[0].length);return o(p),e(f.join(""))}}])}(window,window.angular);